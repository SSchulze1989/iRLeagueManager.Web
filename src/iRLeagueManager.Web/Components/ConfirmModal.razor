<div class="container justify-content-center preserve-format">
    @if (AllowMarkup)
    {
        @((MarkupString)Text)
    }
    else
    {
        @Text
    }
</div>
<div class="pt-2 pb-2">
    <div class="row">
        @switch (ButtonTypes)
        {
            case ButtonTypes.Ok:
                <div class="col d-flex justify-content-center">
                    <button class="btn @GetButtonStyleClass().primary" @onclick=OkClick>@OkButtonText</button>
                </div>
                break;
            case ButtonTypes.OkCancel:
                <div class="col d-flex justify-content-center">
                    <button class="btn @GetButtonStyleClass().primary" @onclick=OkClick>@OkButtonText</button>
                </div>
                <div class="col d-flex justify-content-center">
                    <button class="btn @GetButtonStyleClass().secondary" @onclick=CancelClick>@CancelButtonText</button>
                </div>
                break;
            case ButtonTypes.YesNo:
                <div class="col d-flex justify-content-center">
                    <button class="btn @GetButtonStyleClass().primary" @onclick=OkClick>Yes</button>
                </div>
                <div class="col d-flex justify-content-center">
                    <button class="btn @GetButtonStyleClass().secondary" @onclick=CancelClick>No</button>
                </div>
                break;
        }
    </div>
</div>

@code {
    [CascadingParameter]
    public BlazoredModalInstance ModalInstance { get; set; } = default!;
    [Parameter]
    public string Text { get; set; } = string.Empty;
    [Parameter]
    public ButtonTypes ButtonTypes { get; set; } = ButtonTypes.Ok;
    [Parameter]
    public ButtonStyles ButtonStyles { get; set; } = ButtonStyles.PrimarySecondary;
    [Parameter]
    public bool AllowMarkup { get; set; } = false;
    [Parameter]
    public string OkButtonText { get; set; } = "Ok";
    [Parameter]
    public string CancelButtonText { get; set; } = "Cancel";

    private void OkClick()
    {
        ModalInstance.CloseAsync(ModalResult.Ok());
    }

    private void CancelClick()
    {
        ModalInstance.CancelAsync();
    }

    private (string primary, string secondary) GetButtonStyleClass() => ButtonStyles switch
    {
        ButtonStyles.PrimarySecondary => ("btn-primary", "btn-secondary"),
        ButtonStyles.PrimaryOutlineSecondary => ("btn-outline-primary", "btn-secondary"),
        ButtonStyles.PrimarySecondaryOutline => ("btn-primary", "btn-outline-secondary"),
        ButtonStyles.PrimaryOutlineSecondaryOutline => ("btn-outline-primary", "btn-outline-secondary"),
        _ => ("btn-primary", "btn-secondary")
    };
}
