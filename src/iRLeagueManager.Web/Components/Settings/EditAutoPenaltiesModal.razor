@using iRLeagueApiCore.Common.Enums;
@using iRLeagueApiCore.Common.Models;
@inherits EditModalBase<AutoPenaltiesCollectionViewModel, IEnumerable<AutoPenaltyConfiguration>>

@foreach(var autoPenalty in Vm)
{
    <EditForm Model="autoPenalty">
        <div class="input-group-list mb-3">
            <InputGroup Label="Description">
                <InputText class="form-control" @bind-Value=autoPenalty.Description />
            </InputGroup>
            <InputGroup Label="Conditions">
                <label class="form-control text-muted">
                    Conditions
                </label>
            </InputGroup>
            <InputGroup Label="Type">
                <InputSelect class="form-select" @bind-Value="autoPenalty.Type">
                    @foreach (var penaltyType in Enum.GetValues<PenaltyType>())
                    {
                        <option value="@penaltyType">@penaltyType</option>
                    }
                </InputSelect>
            </InputGroup>
            @switch (autoPenalty.Type)
            {
                case PenaltyType.Points:
                    <InputGroup Label="Points">
                        <InputNumber class="form-control" @bind-Value="autoPenalty.Points" />
                    </InputGroup>
                    break;
                case PenaltyType.Position:
                    <InputGroup Label="Positions">
                        <InputNumber class="form-control" @bind-Value="autoPenalty.Positions" />
                    </InputGroup>
                    break;
                case PenaltyType.Time:
                    <InputGroup Label="Time">
                        <InputNumber class="form-control" @bind-Value="autoPenalty.TimeSeconds" />
                        <label class="input-group-text">Seconds</label>
                    </InputGroup>
                    break;
            }
        </div>
        <ValidationSummary />
        <FormValidationMessage TValue=string Message=@ResultValidator?.ErrorMessage />
    </EditForm>
}

<button class="btn btn-outline-secondary" @onclick=Vm.Add>
    Add Penalty
</button>
<CancelSubmitButtons SubmitText="Ok" CancelText="Cancel" OnSubmit=Submit OnCancel=Cancel ModelState="Vm" />

@code {

}
