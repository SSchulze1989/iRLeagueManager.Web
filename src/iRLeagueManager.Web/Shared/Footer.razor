@implements IDisposable
@inject SharedStateService SharedState

<footer class="d-flex flex-row justify-content-end">
    <small class="font-monospace fw-light me-2">
        &copy; 2022-2023 Simon Schulze  -  Time zone: @TimeZone.Id (@($"{(TimeZone.BaseUtcOffset >= TimeSpan.Zero ? "+" : "-")}{TimeZone.BaseUtcOffset.ToString(@"hh\:mm")}"))
    </small>
</footer>

@code {
    private TimeZoneInfo TimeZone { get; set; } = TimeZoneInfo.Local;

    protected override void OnInitialized()
    {
        SharedState.StateChanged += OnSharedStateChanged;
    }

    private void OnSharedStateChanged(object? sender, EventArgs e)
    {
        TimeZone = SharedState.LocalTimeZone;
        _ = InvokeAsync(StateHasChanged);
    }

    public virtual void Dispose()
    {
        SharedState.StateChanged -= OnSharedStateChanged;
    }
}
